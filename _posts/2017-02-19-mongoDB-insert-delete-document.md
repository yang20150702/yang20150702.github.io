---
layout: post
title: MongoDB笔记 -- 插入和删除操作
date: 2017-02-19
excerpt: "MongoDB中插入、删除文档"
tag:
- mongoDB
comments: true
---

## 插入并保存文档

插入是向MongoDB中添加数据的基本方法。对目标集使用`insert`方法，插入一个文档。

```
>db.foo.insert({"bar":"baz"})
```

这个操作会给文档增加一个`_id`键（要是没有的话），然后将其保存到MongoDB中。

### 批量插入

如果要插入多个文档，使用批量插入会快一些。批量插入能传递一个由文档构成的数组给数据库。

```
>db.foo.batchInsert({"_id":"1"},{"_id":"2"},{"_id":"3"})
```

### 插入：原理和作用

当执行插入的时候，使用的驱动程序会将数据转换成`BSON`的形式，然后将其送入数据库。数据库解析`BSON`，检验是否包含`_id`键并且文档不超过`4MB`，除此之外，不做别的数据验证，就只是简单地将文档原样存入数据库中。这会带来或好或坏的影响，最明显的副作用就是运行插入无效的数据；好处是：它能让数据库更加安全，远离注入式攻击。

## 删除文档

`remove`函数可以接受一个查询文档作为可选参数。给定这个参数后，只有符合条件的文档才被删除。

删除数据是永久性的，不能撤销，也不能恢复。
